(function(){"use strict";var e={9384:function(e,t,n){n(5825);var o=n(284),a=(n(8146),n(8848)),r=(n(7505),n(8747)),i=(n(1049),n(140)),s=(n(4399),n(5947)),l=(n(9031),n(6790)),c=(n(7396),n(2979)),u=(n(1e3),n(6338)),p=(n(836),n(6811)),d=(n(606),n(1220)),m=(n(6871),n(1765)),h=n(6369),f=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},v=[],g=n(1001),y={},w=(0,g.Z)(y,f,v,!1,null,null,null),b=w.exports,S=n(2631),_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("van-search",{staticClass:"search-tool",attrs:{"show-action":"",placeholder:"请输入关键词",clearable:"",shape:"round"},on:{search:e.onSearch},scopedSlots:e._u([{key:"action",fn:function(){return[t("div",{staticClass:"search-btn",on:{click:e.onSearch}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),t("map-container"),t("van-button",{staticClass:"equ-control",attrs:{icon:"setting-o"},on:{click:e.equControl}}),t("van-popup",{staticClass:"control-box",style:{height:"60%"},attrs:{round:"",position:"bottom"},model:{value:e.controlShow,callback:function(t){e.controlShow=t},expression:"controlShow"}},[t("div",{staticClass:"wrap"},[t("div",{staticClass:"message"}),t("div",{staticClass:"tool"},[t("van-row",{attrs:{type:"flex",justify:"space-between"}},[t("van-col",{attrs:{span:"12"}},[t("van-button",{attrs:{type:"primary",round:!0,size:"small",icon:"photograph"},on:{click:function(t){return e.toolSelect(0)}}},[e._v("拍照")]),t("van-button",{attrs:{type:"primary",round:!0,size:"small",icon:"audio"},on:{click:function(t){return e.toolSelect(0)}}},[e._v("录音")])],1),t("van-col",{staticStyle:{"text-align":"right","margin-left":"auto"},attrs:{span:"12"}},[t("van-button",{attrs:{type:"primary",round:!0,size:"small"},on:{click:function(t){return e.startRecorder(1)}}},[e.recorderStatus?e._e():t("van-icon",{attrs:{slot:"icon",name:"phone-circle-o"},slot:"icon"}),e.recorderStatus?t("icon-l6",{attrs:{slot:"icon"},slot:"icon"}):e._e(),e._v(" "+e._s(e.recorderStatus?"录音中...":"对话")+" ")],1),t("van-button",{attrs:{type:"primary",round:!0,size:"small",icon:"chat-o"},on:{click:function(t){return e.toolSelect(2)}}},[e._v("文本")])],1)],1),1===e.toolSelected?t("van-row",{staticClass:"last",attrs:{type:"flex",justify:"space-between"}},[t("van-col",{staticStyle:{"text-align":"right"},attrs:{span:"24"}},[t("van-field",{attrs:{type:"textarea"},scopedSlots:e._u([{key:"input",fn:function(){return[t("div",{staticClass:"duihua-wrap"},[e.recordDuration>0?t("div",{staticClass:"sound-wrap",on:{click:e.playRecorder}},[t("span",{staticStyle:{"margin-right":"-10px"}},[e._v(e._s(e.recordDuration)+'"')]),t("sound-play",{attrs:{classStyle:e.isPlayRecord?"play":""}})],1):e._e()])]},proxy:!0},{key:"button",fn:function(){return[t("van-button",{attrs:{plain:"",type:"primary",round:!0,size:"small"}},[e._v("发送")])]},proxy:!0}],null,!1,3487973837),model:{value:e.textMessage,callback:function(t){e.textMessage=t},expression:"textMessage"}})],1)],1):e._e(),2===e.toolSelected?t("van-row",{staticClass:"last",attrs:{type:"flex",justify:"space-between"}},[t("van-col",{staticClass:"text-input",attrs:{span:"24"}},[t("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",placeholder:"请输入",maxlength:"100","show-word-limit":""},scopedSlots:e._u([{key:"button",fn:function(){return[t("van-button",{attrs:{plain:"",type:"primary",round:!0,size:"small"}},[e._v("发送")])]},proxy:!0}],null,!1,965442644),model:{value:e.textMessage,callback:function(t){e.textMessage=t},expression:"textMessage"}})],1)],1):e._e()],1)])])],1)},x=[],C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"map-wrap"},[t("div",{attrs:{id:"container"}}),t("div",{staticClass:"total-info"},[e._v("共"),t("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":e.mapData.length,duration:5e3}}),e._v("台")],1)])},M=[],Z=(n(7658),n(7634)),k=n.n(Z),P=n(7221),z=n.n(P);const j=[{icon:"http://deapi.yaoant.com/images/temp/qichediao_3.png",lnglat:["116.205467","39.907761"],lable:"吊机-ZX260LCH",driver:"黎香桃",phone:"15727078961"},{icon:"http://deapi.yaoant.com/images/temp/wajueji_3.png",lnglat:["116.368904","39.913423"],lable:"挖掘机-SY19068632767",driver:"段柯拉",phone:"15704745649"},{icon:"http://deapi.yaoant.com/images/temp/wajueji_3.png",lnglat:["116.368806","39.913425"],lable:"挖掘机-SY19068637321",driver:"史梦桐",phone:"15723001334"},{icon:"http://deapi.yaoant.com/images/temp/zhuangzaiji_3.png",lnglat:["116.305467","39.807761"],lable:"装载机-SEM65316895",driver:"孔玮琪",phone:"15756672099"},{icon:"http://deapi.yaoant.com/images/temp/wajueji_3.png",lnglat:["116.57852365004","39.86439249713"],lable:"挖掘机-SY19068632767",driver:"萧婉容",phone:"13492408978"},{icon:"http://deapi.yaoant.com/images/temp/zhuangzaiji_3.png",lnglat:["116.693105656835","39.897603701752"],lable:"装载机-SEM65316326",driver:"苏洋洋",phone:"13403708193"},{icon:"http://deapi.yaoant.com/images/temp/zhuangzaiji_3.png",lnglat:["114.271942","30.601031"],lable:"装载机-SEM65316010",driver:"晏千城",phone:"13416821267"},{icon:"http://deapi.yaoant.com/images/temp/wajueji_3.png",lnglat:["114.28767","30.595712"],lable:"挖掘机-SY1906866432",driver:"谢伶伶",phone:"13418951033"},{icon:"http://deapi.yaoant.com/images/temp/zhuangzaiji_3.png",lnglat:["114.274409","30.588083"],lable:"装载机-SEM65316523",driver:"张回响",phone:"13477525555"},{icon:"http://deapi.yaoant.com/images/temp/zhuangzaiji_3.png",lnglat:["114.474785","22.611424"],lable:"装载机-SEM65316325",driver:"王怀亦",phone:"13423413277"},{icon:"http://deapi.yaoant.com/images/temp/wajueji_3.png",lnglat:["114.206306","22.579093"],lable:"挖掘机-SY19068632486",driver:"温思义",phone:"13407384610"},{icon:"http://deapi.yaoant.com/images/temp/zhuangzaiji_3.png",lnglat:["92.419044","30.471117"],lable:"装载机-SEM6531606332",driver:"林栋",phone:"15771393316"},{icon:"http://deapi.yaoant.com/images/temp/wajueji_3.png",lnglat:["87.497169","38.568525"],lable:"挖掘机-SY19068636273",driver:"张三",phone:"13437176281"},{icon:"http://deapi.yaoant.com/images/temp/zhuangzaiji_3.png",lnglat:["89.826271","43.5037"],lable:"装载机-SEM653160383",driver:"胡恬雅",phone:"15739673631"}];window._AMapSecurityConfig={securityJsCode:"3952c55f4d17b81a5806677327706d0e"};var R={name:"MapContainer",components:{CountTo:z()},data(){return{mapData:[]}},mounted(){this.initMap()},methods:{initMap(){k().load({key:"85179fd38e528633089fe2d2ca7c929a",version:"2.0",plugins:["AMap.ToolBar","AMap.MoveAnimation","AMap.InfoWindow","AMap.MarkerClusterer"]}).then((e=>{var t=new e.Map("container",{resizeEnable:!0,viewMode:"3D",pitch:30,zoom:5,showIndoorMap:!0,zoomEnable:!0});t.addControl(new e.ToolBar),this.mapData=j;var n=null;const o=60;function a(e,t){var n=document.createElement("div");n.className="custom-content-window-card",n.style.width="200px";var o=document.createElement("div"),a=document.createElement("div"),i=document.createElement("img");o.className="info-top",a.innerHTML=e,i.src="https://webapi.amap.com/images/close2.gif",i.onclick=r,o.appendChild(a),o.appendChild(i),n.appendChild(o);var s=document.createElement("div");s.className="info-middle",s.style.backgroundColor="white",s.innerHTML=t,n.appendChild(s);var l=document.createElement("div");l.className="info-bottom",l.style.position="relative",l.style.top="0px",l.style.margin="0 auto";var c=document.createElement("img");return c.src="https://webapi.amap.com/images/sharp.png",l.appendChild(c),n.appendChild(l),n}function r(){t.clearInfoWindow()}var i=function(t){const n=j.length;var o=Math.pow(t.count/n,1/18),a=document.createElement("div"),r=180-180*o,i="hsla("+r+",100%,40%,0.7)",s="hsla("+r+",100%,90%,1)",l="hsla("+r+",100%,40%,1)",c="hsla("+r+",100%,90%,1)";a.style.backgroundColor=i;var u=Math.round(30+20*Math.pow(t.count/n,.2));a.style.width=a.style.height=u+"px",a.style.border="solid 1px "+l,a.style.borderRadius=u/2+"px",a.style.boxShadow="0 0 5px "+c,a.innerHTML=t.count,a.style.lineHeight=u+"px",a.style.color=s,a.style.fontSize="14px",a.style.textAlign="center",t.marker.setOffset(new e.Pixel(-u/2,-u/2)),t.marker.setContent(a)},s=function(n){const o=n.data&&n.data[0];var r=new e.Pixel(-9,-9);const i=new e.Icon({image:o.icon,size:new e.Size(36,36),imageSize:new e.Size(36,36)});n.marker.setIcon(i),n.marker.setOffset(r);var s=[];s.push(`司机：${o.driver}`);const l=o.phone?`<a href="tel:${o.phone}">${o.phone}</a>`:"";s.push(`电话：${l}`),s.push("状态：离线");var c=new e.InfoWindow({isCustom:!0,content:a(o.lable,s.join("<br/>")),offset:new e.Pixel(16,-45)});n.marker.on("click",(function(){c.open(t,n.marker.getPosition())}))},l=function(){n&&n.setMap(null),n=new e.MarkerCluster(t,j,{gridSize:o,renderClusterMarker:i,renderMarker:s}),n.on("click",(e=>{let n=0,o=0;for(const t of e.clusterData)n+=t.lnglat.lng,o+=t.lnglat.lat;const a=o/e.clusterData.length,r=n/e.clusterData.length;t.setZoomAndCenter(t.getZoom()+2,[r,a])}))};l(2),t.setFitView()})).catch((e=>{console.log(e)}))}}},E=R,O=(0,g.Z)(E,C,M,!1,null,"e3249d14",null),D=O.exports,T=function(){var e=this;e._self._c;return e._m(0)},A=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"com__box"},[t("div",{staticClass:"loading"})])}],F={name:"IconL6"},I=F,H=(0,g.Z)(I,T,A,!1,null,"608b7987",null),L=H.exports,Y=function(){var e=this,t=e._self._c;return t("div",{class:"wifi-symbol "+e.classStyle},[t("div",{staticClass:"wifi-circle first"}),t("div",{staticClass:"wifi-circle second"}),t("div",{staticClass:"wifi-circle third"})])},$=[],N={name:"SoundPlay",props:{classStyle:{type:String,default:""}}},q=N,W=(0,g.Z)(q,Y,$,!1,null,"59c1c5f8",null),B=W.exports,J=n(110),V=n.n(J),X={name:"HomeView",components:{MapContainer:D,IconL6:L,SoundPlay:B},data(){return{filter:"",controlShow:!1,radio:"1",toolSelected:1,textMessage:"",recorder:null,recorderStatus:!1,recordDuration:0,limitFn:null,isPlayRecord:!1}},mounted(){this.init()},methods:{init(){},onSearch(){},equControl(){this.controlShow=!0},toolSelect(e){this.toolSelected=e;var t=this;1!==e&&t.recorder&&(t.stopRecorder(),t.recorder.stop())},startRecorder(e){this.toolSelect(e);var t=this;if(t.recorderStatus)t.stopRecorder();else{if(n&&n.isRecording())return;t.recorder&&t.recorder.stop(),t.limitFn&&clearTimeout(t.limitFn),t.recorder=new(V()),t.recordDuration=0;var n=t.recorder;n.initWithRecord().then((()=>{n.startRecord(),t.recorderStatus=!0,t.limitFn=setTimeout((()=>{t.limitFn=null,t.stopRecorder()}),3e4)})).catch((function(e){t.$toast({message:e.message||e.name||JSON.stringify(e),forbidClick:!0})})),n.onPlay((function(){console.log("onPlay")})),n.onStop((function(){console.log("onStop")})),n.onEnded((function(){console.log("onEnded"),t.isPlayRecord=!1})),n.onAutoEnded((function(){console.log("onAutoEnded")})),n.onStartRecord((function(){console.log("onStartRecord")})),n.onFinishRecord((function(){console.log("onFinishRecord")})),n.onCancelRecord((function(){console.log("onCancelRecord")}))}this.isPlayRecord=!1},stopRecorder(){var e=this,t=e.recorder;t&&t.isRecording()&&t.finishRecord().then((()=>{e.recordDuration=t.getDuration().toFixed(2),e.recorderStatus=!1}))},playRecorder(){var e=this.recorder;e&&(this.isPlayRecord=!this.isPlayRecord,this.isPlayRecord?e.play():e.stop())}}},G=X,K=(0,g.Z)(G,_,x,!1,null,"2f975e36",null),Q=K.exports;h.ZP.use(S.ZP);const U=[{path:"/",name:"home",component:Q}],ee=new S.ZP({mode:"history",base:"/open-device-manager/",routes:U});var te=ee,ne=n(3822);h.ZP.use(ne.ZP);var oe=new ne.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}});h.ZP.use(m.Z),h.ZP.use(d.Z),h.ZP.use(p.Z),h.ZP.use(u.Z),h.ZP.use(c.Z),h.ZP.use(l.Z),h.ZP.use(s.Z),h.ZP.use(i.Z),h.ZP.use(r.Z),h.ZP.use(a.Z),h.ZP.use(o.Z),h.ZP.config.productionTip=!1,new h.ZP({router:te,store:oe,render:e=>e(b)}).$mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],r=e[u][2];for(var s=!0,l=0;l<o.length;l++)(!1&r||i>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(s=!1,r<i&&(i=r));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,i=o[0],s=o[1],l=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var u=l(n)}for(t&&t(o);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},o=self["webpackChunkvue_device_app"]=self["webpackChunkvue_device_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(9384)}));o=n.O(o)})();